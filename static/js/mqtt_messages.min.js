var client;let timeout_f;var connectOptions={timeout:30,reconnect:!0,cleanSession:!1,mqttVersion:4,keepAliveInterval:10,onSuccess:onConnect,onFailure:onFailure};function reload_page(){client.disconnect(),console.log("reload"),document.location.reload()}function connect(){try{(client=new Paho.MQTT.Client("192.168.1.200",9001,"","mozila1"+Math.random().toString(16).slice(2))).connect(connectOptions),console.log("connect")}catch(e){console.log(e)}}function onConnect(){let e=["/basement/kotel/water","/basement/kotel/smoke","/outside/temp"];client.onMessageArrived=function(n){console.log("onMessageArrived: "+n.destinationName+" - "+n.payloadString),e.includes(n.destinationName)&&(clearTimeout(timeout_f),timeout_f="undefined"==typeof htc?setTimeout(reload_page,3e3):setTimeout(send_ajax,3e3))},client.subscribe("#",{qos:1})}function onFailure(e){console.log("on failure",JSON.stringify(e))}function send(){var e=new Paho.MQTT.Message(document.forms.sender.message.value);e.destinationName=document.forms.sender.topic.value,e.qos=2,client.send(e)}connect();